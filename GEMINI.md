# 開発環境・言語パッケージ管理ガイドライン (Gemini用)

このプロジェクトでは、効率的かつ再現可能な開発環境を維持するために **mise** と **uv** を使用しています。Geminiがコード生成、環境構築、コマンド提案を行う際は、以下のルールを厳守してください。

## 1. ツールチェーン管理 (mise)
ランタイム（Python, Node.js 等）および開発ツールのバージョン管理には `mise` を使用します。

- **設定ファイル:** プロジェクトルートの `mise.toml` を参照・編集してください。
- **ランタイム管理:** ツールのインストールやバージョン切り替えは `mise` を介して行う提案をしてください。
- **タスク実行:** - `mise.toml` 内の `[tasks]` で定義されたタスクは `mise run <task_name>` を使用してください。
  - 特定のツール環境下で一時的にコマンドを実行する場合は `mise exec -- <command>` を検討してください。
- **ツールの追加:** 新しいツール（CLIツール等）が必要な場合は `mise use <tool>@<version>` を提案してください。

## 2. Python パッケージ管理 (uv)
Python のプロジェクト管理、パッケージの追加・削除、仮想環境の運用には `uv` を使用します。`pip` や `venv` モジュールを直接呼び出すことは厳禁です。

- **パッケージ追加:** `uv add <package>`
- **開発用パッケージ追加:** `uv add --dev <package>`
- **パッケージ削除:** `uv remove <package>`
- **スクリプト・コマンド実行:** 全ての Python 実行は `uv run <command_or_script>` の形式で行ってください（例: `uv run main.py`, `uv run pytest`）。
- **環境同期:** 依存関係の整合性を確保する場合は `uv sync` を提案してください。
- **管理ファイル:** `pyproject.toml` と `uv.lock` を Source of Truth（信頼できる唯一の情報源）として扱ってください。

## 3. Antigravity 固有のルール
- Antigravity フレームワークのディレクトリ構造と設計思想に基づいたコーディングを行ってください。
- 新しいモジュールや依存関係を追加する際は、必ず `uv` を使用してプロジェクト全体の整合性を維持してください。

## 4. 禁止事項
- **`pip` コマンドの使用:** `pip install` や `pip freeze` などの提案を禁止します（代わりに `uv` を使用）。
- **手動の `venv` 作成:** `python -m venv .venv` などの提案を禁止します（`uv` が自動管理するため）。
- **他ツールの混在:** `asdf`, `pyenv`, `nodenv`, `poetry`, `pdm` などの操作提案を禁止します（`mise` と `uv` に統一）。
- **グローバル環境へのインストール:** システムの Python 環境を汚染するような操作は提案しないでください。

## 5. 出力ルール
- 回答は常に **日本語** で行ってください。
- コマンドを提示する際は、上記のツール（mise, uv）が正しく構成されている前提で記述してください。
